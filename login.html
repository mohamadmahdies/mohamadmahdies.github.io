<!DOCTYPE html>
<html lang="fa" dir="rtl">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>ورود | کتابچه هدیه</title>
    <link
      rel="preconnect"
      href="https://fonts.googleapis.com"
      crossorigin="anonymous"
    />
    <link
      rel="preconnect"
      href="https://fonts.gstatic.com"
      crossorigin="anonymous"
    />
    <link
      href="https://fonts.googleapis.com/css2?family=Vazirmatn:wght@400;500;600&display=swap"
      rel="stylesheet"
    />
    <style>
      :root {
        color-scheme: light;
        --bg: #fff8f7;
        --card: #ffffff;
        --accent: #ea5458;
        --accent-light: #fde8e9;
        --text: #1f1a1b;
        --muted: #6b5f60;
        --border: #f0d7d8;
        font-family: "Vazirmatn", sans-serif;
      }

      * {
        box-sizing: border-box;
      }

      body {
        margin: 0;
        min-height: 100vh;
        background: linear-gradient(150deg, #fff8f7 0%, #fde8e9 45%, #fff8f7 100%);
        color: var(--text);
        line-height: 1.6;
        font-size: 16px;
        display: flex;
        align-items: center;
        justify-content: center;
        padding: 20px;
      }

      .login-container {
        width: 100%;
        max-width: 420px;
        background: var(--card);
        border-radius: 24px;
        padding: 40px 32px;
        box-shadow: 0 30px 80px rgba(234, 84, 88, 0.14);
        border: 1px solid rgba(234, 84, 88, 0.12);
      }

      .login-header {
        text-align: center;
        margin-bottom: 32px;
      }

      .login-header h1 {
        margin: 0 0 8px;
        font-size: 28px;
        color: var(--accent);
      }

      .login-header p {
        margin: 0;
        color: var(--muted);
        font-size: 15px;
      }

      .form-group {
        margin-bottom: 20px;
      }

      .form-group label {
        display: block;
        margin-bottom: 8px;
        font-weight: 600;
        color: var(--text);
        font-size: 14px;
      }

      .phone-input-wrapper {
        display: flex;
        gap: 8px;
        align-items: center;
      }

      .country-code {
        display: flex;
        align-items: center;
        padding: 12px 14px;
        background: #fbfbff;
        border: 1px solid var(--border);
        border-radius: 12px;
        font-size: 15px;
        color: var(--text);
        white-space: nowrap;
      }

      .phone-input {
        flex: 1;
        border: 1px solid var(--border);
        border-radius: 12px;
        padding: 12px 14px;
        font-size: 15px;
        font-family: inherit;
        background: #fbfbff;
        transition: border-color 0.2s, box-shadow 0.2s;
        direction: ltr;
        text-align: left;
      }

      .phone-input:focus {
        outline: none;
        border-color: var(--accent);
        box-shadow: 0 0 0 3px rgba(234, 84, 88, 0.14);
      }

      .code-input {
        width: 100%;
        border: 1px solid var(--border);
        border-radius: 12px;
        padding: 12px 14px;
        font-size: 15px;
        font-family: inherit;
        background: #fbfbff;
        transition: border-color 0.2s, box-shadow 0.2s;
        direction: ltr;
        text-align: center;
        letter-spacing: 8px;
        font-weight: 600;
      }

      .code-input:focus {
        outline: none;
        border-color: var(--accent);
        box-shadow: 0 0 0 3px rgba(234, 84, 88, 0.14);
      }

      .submit-btn {
        width: 100%;
        border: none;
        border-radius: 12px;
        padding: 14px;
        background: linear-gradient(135deg, var(--accent), #c63e42);
        color: #fff;
        font-weight: 600;
        font-size: 15px;
        cursor: pointer;
        transition: transform 0.15s ease, box-shadow 0.2s ease, opacity 0.2s;
        margin-top: 8px;
      }

      .submit-btn:hover {
        transform: translateY(-1px);
        box-shadow: 0 10px 30px rgba(234, 84, 88, 0.25);
      }

      .submit-btn:active {
        transform: translateY(0);
      }

      .submit-btn:disabled {
        opacity: 0.6;
        cursor: not-allowed;
        transform: none;
      }

      .resend-link {
        text-align: center;
        margin-top: 16px;
      }

      .resend-link a {
        color: var(--accent);
        text-decoration: none;
        font-size: 14px;
        cursor: pointer;
      }

      .resend-link a:hover {
        text-decoration: underline;
      }

      .error-message {
        background: var(--accent-light);
        color: var(--accent);
        padding: 12px;
        border-radius: 12px;
        font-size: 14px;
        margin-bottom: 20px;
        text-align: center;
        display: none;
      }

      .error-message.show {
        display: block;
      }

      .step {
        display: none;
      }

      .step.active {
        display: block;
      }

      .info-text {
        font-size: 13px;
        color: var(--muted);
        margin-top: 8px;
        text-align: center;
      }
    </style>
  </head>
  <body>
    <div class="login-container">
      <div class="login-header">
        <h1>ورود</h1>
        <p>برای ساخت یا ویرایش پروفایل خود وارد شوید</p>
      </div>

      <div class="error-message" id="errorMessage"></div>

      <!-- Step 1: Phone Number -->
      <div class="step active" id="phoneStep">
        <form id="phoneForm">
          <div class="form-group">
            <label for="phoneNumber">شماره تلفن</label>
            <div class="phone-input-wrapper">
              <div class="country-code">+98</div>
              <input
                type="tel"
                id="phoneNumber"
                class="phone-input"
                placeholder="9123456789"
                inputmode="numeric"
                maxlength="10"
                required
              />
            </div>
          </div>
          <button type="submit" class="submit-btn">ارسال کد تایید</button>
        </form>
      </div>

      <!-- Step 2: OTP Code -->
      <div class="step" id="codeStep">
        <form id="codeForm">
          <div class="form-group">
            <label for="otpCode">کد تایید</label>
            <input
              type="text"
              id="otpCode"
              class="code-input"
              placeholder="123456"
              inputmode="numeric"
              maxlength="6"
              required
            />
            <p class="info-text">کد تایید به شماره شما ارسال شد</p>
          </div>
          <button type="submit" class="submit-btn">تایید و ورود</button>
          <div class="resend-link">
            <a href="#" id="resendLink">ارسال مجدد کد</a>
          </div>
        </form>
      </div>
    </div>

    <script>
      const phoneForm = document.getElementById("phoneForm");
      const codeForm = document.getElementById("codeForm");
      const phoneStep = document.getElementById("phoneStep");
      const codeStep = document.getElementById("codeStep");
      const phoneNumberInput = document.getElementById("phoneNumber");
      const otpCodeInput = document.getElementById("otpCode");
      const errorMessage = document.getElementById("errorMessage");
      const resendLink = document.getElementById("resendLink");

      // Hardcoded OTP code
      const VALID_OTP = "123456";

      // Phone number validation
      phoneNumberInput.addEventListener("input", (e) => {
        e.target.value = e.target.value.replace(/[^0-9]/g, "");
      });

      // OTP code validation
      otpCodeInput.addEventListener("input", (e) => {
        e.target.value = e.target.value.replace(/[^0-9]/g, "");
      });

      // Show error message
      function showError(message) {
        errorMessage.textContent = message;
        errorMessage.classList.add("show");
        setTimeout(() => {
          errorMessage.classList.remove("show");
        }, 5000);
      }

      // Phone form submission
      phoneForm.addEventListener("submit", (e) => {
        e.preventDefault();
        const phone = phoneNumberInput.value.trim();

        if (!phone || phone.length !== 10) {
          showError("لطفاً شماره تلفن معتبر وارد کنید (۱۰ رقم)");
          return;
        }

        // Hide error
        errorMessage.classList.remove("show");

        // Show code step
        phoneStep.classList.remove("active");
        codeStep.classList.add("active");
        otpCodeInput.focus();
      });

      // Code form submission
      codeForm.addEventListener("submit", (e) => {
        e.preventDefault();
        const code = otpCodeInput.value.trim();

        if (code !== VALID_OTP) {
          showError("کد تایید اشتباه است. لطفاً دوباره تلاش کنید.");
          otpCodeInput.value = "";
          otpCodeInput.focus();
          return;
        }

        // Save phone number to localStorage (optional, for future use)
        const phone = phoneNumberInput.value.trim();
        localStorage.setItem("userPhone", phone);
        localStorage.setItem("isLoggedIn", "true");

        // Redirect to profile page
        window.location.href = "./profile.html";
      });

      // Resend code
      resendLink.addEventListener("click", (e) => {
        e.preventDefault();
        otpCodeInput.value = "";
        otpCodeInput.focus();
        // In a real app, this would trigger a new OTP send
        // For now, just show a message
        showError("کد جدید ارسال شد. کد تایید: 123456");
      });
    </script>
  </body>
</html>
